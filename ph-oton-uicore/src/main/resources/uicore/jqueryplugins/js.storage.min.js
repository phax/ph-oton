(function(n){var p=!1;"function"===typeof define&&define.amd&&(define(n),p=!0);"object"===typeof exports&&(module.exports=n(),p=!0);if(!p){var u=window.Storages,v=window.Storages=n();v.noConflict=function(){window.Storages=u;return v}}})(function(){function n(){var a=arguments.length,d=window[this._type],c=arguments,b=c[0],e,h,g;if(1>a)throw Error("Minimum 1 argument must be given");if(Array.isArray(b)){e={};for(h in b)if(b.hasOwnProperty(h)){c=b[h];try{e[c]=JSON.parse(d.getItem(c))}catch(f){e[c]=
d.getItem(c)}}return e}if(1==a)try{return JSON.parse(d.getItem(b))}catch(f){return d.getItem(b)}else{try{e=JSON.parse(d.getItem(b))}catch(f){throw new ReferenceError(b+" is not defined in this storage");}for(h=1;h<a-1;h++)if(e=e[c[h]],void 0===e)throw new ReferenceError([].slice.call(c,1,h+1).join(".")+" is not defined in this storage");if(Array.isArray(c[h])){d=e;e={};for(g in c[h])c[h].hasOwnProperty(g)&&(e[c[h][g]]=d[c[h][g]]);return e}return e[c[h]]}}function p(){var a=arguments.length,d=window[this._type],
c=arguments,b=c[0],e=c[1],h=isNaN(e)?{}:[],f,k,l;if(1>a||!q(b)&&2>a)throw Error("Minimum 2 arguments must be given or first parameter must be an object");if(q(b)){for(l in b)b.hasOwnProperty(l)&&(e=b[l],q(e)||this.alwaysUseJson?d.setItem(l,JSON.stringify(e)):d.setItem(l,e));return b}if(2==a)return"object"===typeof e||this.alwaysUseJson?d.setItem(b,JSON.stringify(e)):d.setItem(b,e),e;try{k=d.getItem(b),null!=k&&(h=JSON.parse(k))}catch(m){}k=h;for(l=1;l<a-2;l++){e=c[l];f=isNaN(c[l+1])?"object":"array";
if(!k[e]||"object"==f&&!q(k[e])||"array"==f&&!Array.isArray(k[e]))k[e]="array"==f?[]:{};k=k[e]}k[c[l]]=c[l+1];d.setItem(b,JSON.stringify(h));return h}function u(){var a=arguments.length,d=window[this._type],c=arguments,b=c[0],e,f,g,k;if(1>a)throw Error("Minimum 1 argument must be given");if(Array.isArray(b))for(g in b)b.hasOwnProperty(g)&&d.removeItem(b[g]);else if(1==a)d.removeItem(b);else{try{e=f=JSON.parse(d.getItem(b))}catch(l){throw new ReferenceError(b+" is not defined in this storage");}for(g=
1;g<a-1;g++)if(f=f[c[g]],void 0===f)throw new ReferenceError([].slice.call(c,1,g).join(".")+" is not defined in this storage");if(Array.isArray(c[g]))for(k in c[g])c[g].hasOwnProperty(k)&&delete f[c[g][k]];else delete f[c[g]];d.setItem(b,JSON.stringify(e))}return!0}function v(a){var d=w.call(this),c;for(c in d)d.hasOwnProperty(c)&&u.call(this,d[c]);if(a)for(c in f.namespaceStorages)f.namespaceStorages.hasOwnProperty(c)&&y(c)}function z(){var a=arguments.length,d=arguments,c=d[0],b;if(0==a)return 0==
w.call(this).length;if(Array.isArray(c)){for(b=0;b<c.length;b++)if(!z.call(this,c[b]))return!1;return!0}try{var e=n.apply(this,arguments);Array.isArray(d[a-1])||(e={totest:e});for(b in e){var f;if(f=e.hasOwnProperty(b)){var g;if(g=q(e[b]))a:{var k=e[b],a=void 0;for(a in k){g=!1;break a}g=!0}f=!(g||Array.isArray(e[b])&&!e[b].length||"boolean"!==typeof e[b]&&!e[b])}if(f)return!1}return!0}catch(l){return!0}}function A(){var a=arguments.length,d=arguments,c=d[0],b;if(1>a)throw Error("Minimum 1 argument must be given");
if(Array.isArray(c)){for(b=0;b<c.length;b++)if(!A.call(this,c[b]))return!1;return!0}try{var e=n.apply(this,arguments);Array.isArray(d[a-1])||(e={totest:e});for(b in e)if(e.hasOwnProperty(b)&&(void 0===e[b]||null===e[b]))return!1;return!0}catch(f){return!1}}function w(){var a=window[this._type],d=[],c={};if((c=0<arguments.length?n.apply(this,arguments):a)&&c._cookie){var a=Cookies.get(),b;for(b in a)a.hasOwnProperty(b)&&""!=b&&d.push(b.replace(c._prefix,""))}else for(var e in c)c.hasOwnProperty(e)&&
d.push(e);return d}function y(a){if(!a||"string"!=typeof a)throw Error("First parameter must be a string");x?(window.localStorage.getItem(a)||window.localStorage.setItem(a,"{}"),window.sessionStorage.getItem(a)||window.sessionStorage.setItem(a,"{}")):(window.localCookieStorage.getItem(a)||window.localCookieStorage.setItem(a,"{}"),window.sessionCookieStorage.getItem(a)||window.sessionCookieStorage.setItem(a,"{}"));var d={localStorage:m({},f.localStorage,{_ns:a}),sessionStorage:m({},f.sessionStorage,
{_ns:a})};"undefined"!==typeof Cookies&&(window.cookieStorage.getItem(a)||window.cookieStorage.setItem(a,"{}"),d.cookieStorage=m({},f.cookieStorage,{_ns:a}));return f.namespaceStorages[a]=d}function q(a){if(!a||"[object Object]"!==D.call(a))return!1;a=E(a);if(!a)return!0;a=B.call(a,"constructor")&&a.constructor;return"function"===typeof a&&C.call(a)===F}function m(){for(var a=1,d=arguments[0];a<arguments.length;a++){var c=arguments[a],b;for(b in c)c.hasOwnProperty(b)&&(d[b]=c[b])}return d}var r={},
D=r.toString,B=r.hasOwnProperty,C=B.toString,F=C.call(Object),E=Object.getPrototypeOf,f={},x=function(a){try{if(!window[a])return!1;window[a].setItem("jsapi","jsapi");window[a].removeItem("jsapi");return!0}catch(d){return!1}}("localStorage"),t={_type:"",_ns:"",_callMethod:function(a,d){d=Array.prototype.slice.call(d);var c=[],b=d[0];this._ns&&c.push(this._ns);"string"===typeof b&&-1!==b.indexOf(".")&&(d.shift(),[].unshift.apply(d,b.split(".")));[].push.apply(c,d);return a.apply(this,c)},alwaysUseJson:!1,
get:function(){return this._callMethod(n,arguments)},set:function(){var a=arguments.length,d=arguments,c=d[0];if(1>a||!q(c)&&2>a)throw Error("Minimum 2 arguments must be given or first parameter must be an object");if(q(c)&&this._ns){for(var b in c)c.hasOwnProperty(b)&&this._callMethod(p,[b,c[b]]);return c}a=this._callMethod(p,d);return this._ns?a[c.split(".")[0]]:a},remove:function(){if(1>arguments.length)throw Error("Minimum 1 argument must be given");return this._callMethod(u,arguments)},removeAll:function(a){return this._ns?
(this._callMethod(p,[{}]),!0):this._callMethod(v,[a])},isEmpty:function(){return this._callMethod(z,arguments)},isSet:function(){if(1>arguments.length)throw Error("Minimum 1 argument must be given");return this._callMethod(A,arguments)},keys:function(){return this._callMethod(w,arguments)}};"undefined"!==typeof Cookies&&(window.name||(window.name=Math.floor(1E8*Math.random())),r={_cookie:!0,_prefix:"",_expires:null,_path:null,_domain:null,setItem:function(a,d){Cookies.set(this._prefix+a,d,{expires:this._expires,
path:this._path,domain:this._domain})},getItem:function(a){return Cookies.get(this._prefix+a)},removeItem:function(a){return Cookies.remove(this._prefix+a,{path:this._path})},clear:function(){var a=Cookies.get(),d;for(d in a)a.hasOwnProperty(d)&&""!=d&&(!this._prefix&&-1===d.indexOf("ls_")&&-1===d.indexOf("ss_")||this._prefix&&0===d.indexOf(this._prefix))&&Cookies.remove(d)},setExpires:function(a){this._expires=a;return this},setPath:function(a){this._path=a;return this},setDomain:function(a){this._domain=
a;return this},setConf:function(a){a.path&&(this._path=a.path);a.domain&&(this._domain=a.domain);a.expires&&(this._expires=a.expires);return this},setDefaultConf:function(){this._path=this._domain=this._expires=null}},x||(window.localCookieStorage=m({},r,{_prefix:"ls_",_expires:3650}),window.sessionCookieStorage=m({},r,{_prefix:"ss_"+window.name+"_"})),window.cookieStorage=m({},r),f.cookieStorage=m({},t,{_type:"cookieStorage",setExpires:function(a){window.cookieStorage.setExpires(a);return this},
setPath:function(a){window.cookieStorage.setPath(a);return this},setDomain:function(a){window.cookieStorage.setDomain(a);return this},setConf:function(a){window.cookieStorage.setConf(a);return this},setDefaultConf:function(){window.cookieStorage.setDefaultConf();return this}}));f.initNamespaceStorage=function(a){return y(a)};x?(f.localStorage=m({},t,{_type:"localStorage"}),f.sessionStorage=m({},t,{_type:"sessionStorage"})):(f.localStorage=m({},t,{_type:"localCookieStorage"}),f.sessionStorage=m({},
t,{_type:"sessionCookieStorage"}));f.namespaceStorages={};f.removeAllStorages=function(a){f.localStorage.removeAll(a);f.sessionStorage.removeAll(a);f.cookieStorage&&f.cookieStorage.removeAll(a);a||(f.namespaceStorages={})};f.alwaysUseJsonInStorage=function(a){t.alwaysUseJson=a;f.localStorage.alwaysUseJson=a;f.sessionStorage.alwaysUseJson=a;f.cookieStorage&&(f.cookieStorage.alwaysUseJson=a)};return f});
