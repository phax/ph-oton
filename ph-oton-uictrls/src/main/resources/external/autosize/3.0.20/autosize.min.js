(function(l,g){if("function"===typeof define&&define.amd)define(["exports","module"],g);else if("undefined"!==typeof exports&&"undefined"!==typeof module)g(exports,module);else{var e={exports:{}};g(e.exports,e);l.autosize=e.exports}})(this,function(l,g){function e(a){function c(){var f=window.getComputedStyle(a,null);"vertical"===f.resize?a.style.resize="none":"both"===f.resize&&(a.style.resize="horizontal");e="content-box"===f.boxSizing?-(parseFloat(f.paddingTop)+parseFloat(f.paddingBottom)):parseFloat(f.borderTopWidth)+
parseFloat(f.borderBottomWidth);isNaN(e)&&(e=0);d()}function b(f){var b=a.style.width;a.style.width="0px";a.offsetWidth;a.style.width=b;a.style.overflowY=f}function h(a){for(var b=[];a&&a.parentNode&&a.parentNode instanceof Element;)a.parentNode.scrollTop&&b.push({node:a.parentNode,scrollTop:a.parentNode.scrollTop}),a=a.parentNode;return b}function g(){var b=a.style.height,c=h(a),d=document.documentElement&&document.documentElement.scrollTop;a.style.height="auto";var k=a.scrollHeight+e;0===a.scrollHeight?
a.style.height=b:(a.style.height=k+"px",l=a.clientWidth,c.forEach(function(a){a.node.scrollTop=a.scrollTop}),d&&(document.documentElement.scrollTop=d))}function d(){g();var f=Math.round(parseFloat(a.style.height)),d=window.getComputedStyle(a,null),c=Math.round(parseFloat(d.height));c!==f?"visible"!==d.overflowY&&(b("visible"),g(),c=Math.round(parseFloat(window.getComputedStyle(a,null).height))):"hidden"!==d.overflowY&&(b("hidden"),g(),c=Math.round(parseFloat(window.getComputedStyle(a,null).height)));
if(n!==c){n=c;f=p("autosize:resized");try{a.dispatchEvent(f)}catch(e){}}}if(a&&a.nodeName&&"TEXTAREA"===a.nodeName&&!k.has(a)){var e=null,l=a.clientWidth,n=null,q=function(){a.clientWidth!==l&&d()},m=function(b){window.removeEventListener("resize",q,!1);a.removeEventListener("input",d,!1);a.removeEventListener("keyup",d,!1);a.removeEventListener("autosize:destroy",m,!1);a.removeEventListener("autosize:update",d,!1);Object.keys(b).forEach(function(c){a.style[c]=b[c]});k["delete"](a)}.bind(a,{height:a.style.height,
resize:a.style.resize,overflowY:a.style.overflowY,overflowX:a.style.overflowX,wordWrap:a.style.wordWrap});a.addEventListener("autosize:destroy",m,!1);"onpropertychange"in a&&"oninput"in a&&a.addEventListener("keyup",d,!1);window.addEventListener("resize",q,!1);a.addEventListener("input",d,!1);a.addEventListener("autosize:update",d,!1);a.style.overflowX="hidden";a.style.wordWrap="break-word";k.set(a,{destroy:m,update:d});c()}}function r(a){(a=k.get(a))&&a.destroy()}function t(a){(a=k.get(a))&&a.update()}
var k="function"===typeof Map?new Map:function(){var a=[],c=[];return{has:function(b){return-1<a.indexOf(b)},get:function(b){return c[a.indexOf(b)]},set:function(b,e){-1===a.indexOf(b)&&(a.push(b),c.push(e))},"delete":function(b){b=a.indexOf(b);-1<b&&(a.splice(b,1),c.splice(b,1))}}}(),p=function(a){return new Event(a,{bubbles:!0})};try{new Event("test")}catch(a){p=function(a){var b=document.createEvent("Event");b.initEvent(a,!0,!1);return b}}var h=null;"undefined"===typeof window||"function"!==typeof window.getComputedStyle?
(h=function(a){return a},h.destroy=function(a){return a},h.update=function(a){return a}):(h=function(a,c){a&&Array.prototype.forEach.call(a.length?a:[a],function(a){return e(a,c)});return a},h.destroy=function(a){a&&Array.prototype.forEach.call(a.length?a:[a],r);return a},h.update=function(a){a&&Array.prototype.forEach.call(a.length?a:[a],t);return a});g.exports=h});
