/*
 GNU Lesser General Public License, http://www.gnu.org/copyleft/lesser.html
 @author  Jan Odvarko, http://odvarko.cz
 @created 2008-06-15
 @updated 2014-12-09
 @link    http://jscolor.com
*/
var jscolor={dir:"",bindClass:"color",binding:!0,preloading:!0,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){jscolor.binding&&jscolor.bind();jscolor.preloading&&jscolor.preload()},getDir:function(){if(!jscolor.dir){var a=jscolor.detectDir();jscolor.dir=!1!==a?a:"jscolor/"}return jscolor.dir},detectDir:function(){for(var a=location.href,f=document.getElementsByTagName("base"),b=0;b<f.length;b+=1)f[b].href&&(a=f[b].href);f=document.getElementsByTagName("script");for(b=
0;b<f.length;b+=1)if(f[b].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(f[b].src))return a=(new jscolor.URI(f[b].src)).toAbsolute(a),a.path=a.path.replace(/[^\/]+$/,""),a.query=null,a.fragment=null,a.toString();return!1},bind:function(){for(var a=new RegExp("(^|\\s)("+jscolor.bindClass+")(\\s*(\\{[^}]*\\})|\\s|$)","i"),f=document.getElementsByTagName("input"),b=0;b<f.length;b+=1)if(!jscolor.isColorAttrSupported||"color"!=f[b].type.toLowerCase()){var n;if(!f[b].color&&f[b].className&&(n=f[b].className.match(a))){var v=
{};if(n[4])try{v=(new Function("return ("+n[4]+")"))()}catch(A){}f[b].color=new jscolor.color(f[b],v)}}},preload:function(){for(var a in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(a)&&jscolor.loadImage(a)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(a){jscolor.imgRequire[a]=!0},loadImage:function(a){jscolor.imgLoaded[a]||(jscolor.imgLoaded[a]=new Image,jscolor.imgLoaded[a].src=jscolor.getDir()+a)},fetchElement:function(a){return"string"===
typeof a?document.getElementById(a):a},addEvent:function(a,f,b){a.addEventListener?a.addEventListener(f,b,!1):a.attachEvent&&a.attachEvent("on"+f,b)},fireEvent:function(a,f){if(a)if(document.createEvent){var b=document.createEvent("HTMLEvents");b.initEvent(f,!0,!0);a.dispatchEvent(b)}else if(document.createEventObject)b=document.createEventObject(),a.fireEvent("on"+f,b);else if(a["on"+f])a["on"+f]()},getElementPos:function(a){var f=a,b=0,n=0;if(f.offsetParent){do b+=f.offsetLeft,n+=f.offsetTop;while(f=
f.offsetParent)}for(;(a=a.parentNode)&&"BODY"!==a.nodeName.toUpperCase();)b-=a.scrollLeft,n-=a.scrollTop;return[b,n]},getElementSize:function(a){return[a.offsetWidth,a.offsetHeight]},getRelMousePos:function(a){var f=0,b=0;a||(a=window.event);"number"===typeof a.offsetX?(f=a.offsetX,b=a.offsetY):"number"===typeof a.layerX&&(f=a.layerX,b=a.layerY);return{x:f,y:b}},getViewPos:function(){return"number"===typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||
document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"===typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&
(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(a){function f(b){for(var a="";b;)if("../"===b.substr(0,3)||"./"===b.substr(0,2))b=b.replace(/^\.+/,"").substr(1);else if("/./"===b.substr(0,3)||"/."===b)b="/"+b.substr(3);else if("/../"===b.substr(0,4)||"/.."===b)b="/"+b.substr(4),a=a.replace(/\/?[^\/]*$/,"");else if("."===b||".."===b)b="";else{var f=b.match(/^\/?[^\/]*/)[0];
b=b.substr(f.length);a+=f}return a}this.authority=this.scheme=null;this.path="";this.fragment=this.query=null;this.parse=function(b){b=b.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);this.scheme=b[3]?b[2]:null;this.authority=b[5]?b[6]:null;this.path=b[7];this.query=b[9]?b[10]:null;this.fragment=b[12]?b[13]:null;return this};this.toString=function(){var b="";null!==this.scheme&&(b=b+this.scheme+":");null!==this.authority&&(b=b+"//"+this.authority);null!==
this.path&&(b+=this.path);null!==this.query&&(b=b+"?"+this.query);null!==this.fragment&&(b=b+"#"+this.fragment);return b};this.toAbsolute=function(b){b=new jscolor.URI(b);var a=new jscolor.URI;if(null===b.scheme)return!1;null!==this.scheme&&this.scheme.toLowerCase()===b.scheme.toLowerCase()&&(this.scheme=null);null!==this.scheme?(a.scheme=this.scheme,a.authority=this.authority,a.path=f(this.path),a.query=this.query):(null!==this.authority?(a.authority=this.authority,a.path=f(this.path),a.query=this.query):
(""===this.path?(a.path=b.path,a.query=null!==this.query?this.query:b.query):("/"===this.path.substr(0,1)?a.path=f(this.path):(a.path=null!==b.authority&&""===b.path?"/"+this.path:b.path.replace(/[^\/]+$/,"")+this.path,a.path=f(a.path)),a.query=this.query),a.authority=b.authority),a.scheme=b.scheme);a.fragment=this.fragment;return a};a&&this.parse(a)},color:function(a,f){function b(d,b,a){if(null===d)return[a,a,a];var c=Math.floor(d),e=a*(1-b);d=a*(1-b*(c%2?d-c:1-(d-c)));switch(c){case 6:case 0:return[a,
d,e];case 1:return[d,a,e];case 2:return[e,a,d];case 3:return[e,d,a];case 4:return[d,e,a];case 5:return[a,e,d]}}function n(d,b){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),
btnT:document.createTextNode(c.pickerCloseText)};for(var l=0;l<jscolor.images.sld[1];l+=4){var f=document.createElement("div");f.style.height="4px";f.style.fontSize="1px";f.style.lineHeight="0";jscolor.picker.sld.appendChild(f)}jscolor.picker.sldB.appendChild(jscolor.picker.sld);jscolor.picker.box.appendChild(jscolor.picker.sldB);jscolor.picker.box.appendChild(jscolor.picker.sldM);jscolor.picker.padB.appendChild(jscolor.picker.pad);jscolor.picker.box.appendChild(jscolor.picker.padB);jscolor.picker.box.appendChild(jscolor.picker.padM);
jscolor.picker.btnS.appendChild(jscolor.picker.btnT);jscolor.picker.btn.appendChild(jscolor.picker.btnS);jscolor.picker.box.appendChild(jscolor.picker.btn);jscolor.picker.boxB.appendChild(jscolor.picker.box)}var e=jscolor.picker;e.box.onmouseup=e.box.onmouseout=function(){a.focus()};e.box.onmousedown=function(){w=!0};e.box.onmousemove=function(d){if(q||r)q&&B(d),r&&C(d),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),x()};"ontouchstart"in
window&&(l=function(d){var a={offsetX:d.touches[0].pageX-t.X,offsetY:d.touches[0].pageY-t.Y};if(q||r)q&&B(a),r&&C(a),x();d.stopPropagation();d.preventDefault()},e.box.removeEventListener("touchmove",l,!1),e.box.addEventListener("touchmove",l,!1));e.padM.onmouseup=e.padM.onmouseout=function(){q&&(q=!1,jscolor.fireEvent(k,"change"))};e.padM.onmousedown=function(d){switch(u){case 0:0===c.hsv[2]&&c.fromHSV(null,null,1);break;case 1:0===c.hsv[1]&&c.fromHSV(null,1,null)}r=!1;q=!0;B(d);x()};"ontouchstart"in
window&&e.padM.addEventListener("touchstart",function(d){t={X:d.target.offsetParent.offsetLeft,Y:d.target.offsetParent.offsetTop};this.onmousedown({offsetX:d.touches[0].pageX-t.X,offsetY:d.touches[0].pageY-t.Y})});e.sldM.onmouseup=e.sldM.onmouseout=function(){r&&(r=!1,jscolor.fireEvent(k,"change"))};e.sldM.onmousedown=function(d){q=!1;r=!0;C(d);x()};"ontouchstart"in window&&e.sldM.addEventListener("touchstart",function(d){t={X:d.target.offsetParent.offsetLeft,Y:d.target.offsetParent.offsetTop};this.onmousedown({offsetX:d.touches[0].pageX-
t.X,offsetY:d.touches[0].pageY-t.Y})});l=v(c);e.box.style.width=l[0]+"px";e.box.style.height=l[1]+"px";e.boxB.style.position="absolute";e.boxB.style.clear="both";e.boxB.style.left=d+"px";e.boxB.style.top=b+"px";e.boxB.style.zIndex=c.pickerZIndex;e.boxB.style.border=c.pickerBorder+"px solid";e.boxB.style.borderColor=c.pickerBorderColor;e.boxB.style.background=c.pickerFaceColor;e.pad.style.width=jscolor.images.pad[0]+"px";e.pad.style.height=jscolor.images.pad[1]+"px";e.padB.style.position="absolute";
e.padB.style.left=c.pickerFace+"px";e.padB.style.top=c.pickerFace+"px";e.padB.style.border=c.pickerInset+"px solid";e.padB.style.borderColor=c.pickerInsetColor;e.padM.style.position="absolute";e.padM.style.left="0";e.padM.style.top="0";e.padM.style.width=c.pickerFace+2*c.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px";e.padM.style.height=e.box.style.height;e.padM.style.cursor="crosshair";e.sld.style.overflow="hidden";e.sld.style.width=jscolor.images.sld[0]+"px";e.sld.style.height=jscolor.images.sld[1]+
"px";e.sldB.style.display=c.slider?"block":"none";e.sldB.style.position="absolute";e.sldB.style.right=c.pickerFace+"px";e.sldB.style.top=c.pickerFace+"px";e.sldB.style.border=c.pickerInset+"px solid";e.sldB.style.borderColor=c.pickerInsetColor;e.sldM.style.display=c.slider?"block":"none";e.sldM.style.position="absolute";e.sldM.style.right="0";e.sldM.style.top="0";e.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+c.pickerFace+2*c.pickerInset+"px";e.sldM.style.height=e.box.style.height;
try{e.sldM.style.cursor="pointer"}catch(m){e.sldM.style.cursor="hand"}e.btn.style.display=c.pickerClosable?"block":"none";e.btn.style.position="absolute";e.btn.style.left=c.pickerFace+"px";e.btn.style.bottom=c.pickerFace+"px";e.btn.style.padding="0 15px";e.btn.style.height="18px";e.btn.style.border=c.pickerInset+"px solid";(function(){var d=c.pickerInsetColor.split(/\s+/);e.btn.style.borderColor=2>d.length?d[0]:d[1]+" "+d[0]+" "+d[0]+" "+d[1]})();e.btn.style.color=c.pickerButtonColor;e.btn.style.font=
"12px sans-serif";e.btn.style.textAlign="center";try{e.btn.style.cursor="pointer"}catch(m){e.btn.style.cursor="hand"}e.btn.onmousedown=function(){c.hidePicker()};e.btnS.style.lineHeight=e.btn.style.height;l=" jscolor-pad";switch(u){case 0:l+=" jscolor-pad-hs";break;case 1:l+=" jscolor-pad-hv"}e.padM.className+=" jscolor-padm";e.sldM.className+=" jscolor-sldm";e.pad.className+=l;A();G();jscolor.picker.owner=c;document.getElementsByTagName("body")[0].appendChild(e.boxB)}function v(d){return[2*d.pickerInset+
2*d.pickerFace+jscolor.images.pad[0]+(d.slider?2*d.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),d.pickerClosable?4*d.pickerInset+3*d.pickerFace+jscolor.images.pad[1]+d.pickerButtonHeight:2*d.pickerInset+2*d.pickerFace+jscolor.images.pad[1]]}function A(){switch(u){case 0:var d=1;break;case 1:d=2}jscolor.picker.padM.style.backgroundPosition=c.pickerFace+c.pickerInset+Math.round(c.hsv[0]/6*(jscolor.images.pad[0]-1))-Math.floor(jscolor.images.cross[0]/2)+"px "+(c.pickerFace+c.pickerInset+
Math.round((1-c.hsv[d])*(jscolor.images.pad[1]-1))-Math.floor(jscolor.images.cross[1]/2))+"px";d=jscolor.picker.sld.childNodes;switch(u){case 0:for(var a=b(c.hsv[0],c.hsv[1],1),l=0;l<d.length;l+=1)d[l].style.backgroundColor="rgb("+a[0]*(1-l/d.length)*100+"%,"+a[1]*(1-l/d.length)*100+"%,"+a[2]*(1-l/d.length)*100+"%)";break;case 1:var f,e=[c.hsv[2],0,0],l=Math.floor(c.hsv[0]),m=l%2?c.hsv[0]-l:1-(c.hsv[0]-l);switch(l){case 6:case 0:a=[0,1,2];break;case 1:a=[1,0,2];break;case 2:a=[2,0,1];break;case 3:a=
[2,1,0];break;case 4:a=[1,2,0];break;case 5:a=[0,2,1]}for(l=0;l<d.length;l+=1)f=1-1/(d.length-1)*l,e[1]=e[0]*(1-f*m),e[2]=e[0]*(1-f),d[l].style.backgroundColor="rgb("+100*e[a[0]]+"%,"+100*e[a[1]]+"%,"+100*e[a[2]]+"%)"}}function G(){switch(u){case 0:var d=2;break;case 1:d=1}jscolor.picker.sldM.style.backgroundPosition="0 "+(c.pickerFace+c.pickerInset+Math.round((1-c.hsv[d])*(jscolor.images.sld[1]-1))-Math.floor(jscolor.images.arrow[1]/2))+"px"}function z(){return jscolor.picker&&jscolor.picker.owner===
c}function H(){k!==a&&c.importColor()}function B(d){var a=jscolor.getRelMousePos(d);d=a.x-c.pickerFace-c.pickerInset;a=a.y-c.pickerFace-c.pickerInset;switch(u){case 0:c.fromHSV(6/(jscolor.images.pad[0]-1)*d,1-a/(jscolor.images.pad[1]-1),null,D);break;case 1:c.fromHSV(6/(jscolor.images.pad[0]-1)*d,null,1-a/(jscolor.images.pad[1]-1),D)}}function C(d){d=jscolor.getRelMousePos(d).y-c.pickerFace-c.pickerInset;switch(u){case 0:c.fromHSV(null,null,1-d/(jscolor.images.sld[1]-1),E);break;case 1:c.fromHSV(null,
1-d/(jscolor.images.sld[1]-1),null,E)}}function x(){c.onImmediateChange&&("string"===typeof c.onImmediateChange?new Function(c.onImmediateChange):c.onImmediateChange).call(c)}this.adjust=this.required=!0;this.hash=!1;this.slider=this.caps=!0;this.styleElement=this.valueElement=a;this.onImmediateChange=null;this.hsv=[0,0,1];this.rgb=[1,1,1];this.minH=0;this.maxH=6;this.minS=0;this.maxS=1;this.minV=0;this.maxV=1;this.pickerOnfocus=!0;this.pickerMode="HSV";this.pickerPosition="bottom";this.pickerSmartPosition=
!0;this.pickerButtonHeight=20;this.pickerClosable=!1;this.pickerCloseText="Close";this.pickerButtonColor="ButtonText";this.pickerFace=10;this.pickerFaceColor="ThreeDFace";this.pickerBorder=1;this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight";this.pickerInset=1;this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow";this.pickerZIndex=1E4;for(var p in f)f.hasOwnProperty(p)&&(this[p]=f[p]);this.hidePicker=function(){z()&&(delete jscolor.picker.owner,
document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB))};this.showPicker=function(){if(!z()){var d=jscolor.getElementPos(a),b=jscolor.getElementSize(a),c=jscolor.getViewPos(),f=jscolor.getViewSize(),e=v(this),m,h,g;switch(this.pickerPosition.toLowerCase()){case "left":m=1;h=0;g=-1;break;case "right":m=1;h=0;g=1;break;case "top":m=0;h=1;g=-1;break;default:m=0,g=h=1}var k=(b[h]+e[h])/2,d=this.pickerSmartPosition?[-c[m]+d[m]+e[m]>f[m]?-c[m]+d[m]+b[m]/2>f[m]/2&&0<=d[m]+b[m]-e[m]?d[m]+
b[m]-e[m]:d[m]:d[m],-c[h]+d[h]+b[h]+e[h]-k+k*g>f[h]?-c[h]+d[h]+b[h]/2>f[h]/2&&0<=d[h]+b[h]-k-k*g?d[h]+b[h]-k-k*g:d[h]+b[h]-k+k*g:0<=d[h]+b[h]-k+k*g?d[h]+b[h]-k+k*g:d[h]+b[h]-k-k*g]:[d[m],d[h]+b[h]-k+k*g];n(d[m],d[h])}};this.importColor=function(){k?this.adjust?!this.required&&/^\s*$/.test(k.value)?(k.value="",g.style.backgroundImage=g.jscStyle.backgroundImage,g.style.backgroundColor=g.jscStyle.backgroundColor,g.style.color=g.jscStyle.color,this.exportColor(y|F)):this.fromString(k.value)||this.exportColor():
this.fromString(k.value,y)||(g.style.backgroundImage=g.jscStyle.backgroundImage,g.style.backgroundColor=g.jscStyle.backgroundColor,g.style.color=g.jscStyle.color,this.exportColor(y|F)):this.exportColor()};this.exportColor=function(d){if(!(d&y)&&k){var a=this.toString();this.caps&&(a=a.toUpperCase());this.hash&&(a="#"+a);k.value=a}d&F||!g||(g.style.backgroundImage="none",g.style.backgroundColor="#"+this.toString(),g.style.color=.5>.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]?"#FFF":"#000");d&
E||!z()||A();d&D||!z()||G()};this.fromHSV=function(d,a,c,f){null!==d&&(d=Math.max(0,this.minH,Math.min(6,this.maxH,d)));null!==a&&(a=Math.max(0,this.minS,Math.min(1,this.maxS,a)));null!==c&&(c=Math.max(0,this.minV,Math.min(1,this.maxV,c)));this.rgb=b(null===d?this.hsv[0]:this.hsv[0]=d,null===a?this.hsv[1]:this.hsv[1]=a,null===c?this.hsv[2]:this.hsv[2]=c);this.exportColor(f)};this.fromRGB=function(a,c,f,k){null!==a&&(a=Math.max(0,Math.min(1,a)));null!==c&&(c=Math.max(0,Math.min(1,c)));null!==f&&(f=
Math.max(0,Math.min(1,f)));a=null===a?this.rgb[0]:a;c=null===c?this.rgb[1]:c;var e=null===f?this.rgb[2]:f,g=Math.min(Math.min(a,c),e);f=Math.max(Math.max(a,c),e);var h=f-g;0===h?a=[null,0,f]:(a=a===g?3+(e-c)/h:c===g?5+(a-e)/h:1+(c-a)/h,a=[6===a?0:a,h/f,f]);null!==a[0]&&(this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,a[0])));0!==a[2]&&(this.hsv[1]=null===a[1]?null:Math.max(0,this.minS,Math.min(1,this.maxS,a[1])));this.hsv[2]=null===a[2]?null:Math.max(0,this.minV,Math.min(1,this.maxV,a[2]));
a=b(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=a[0];this.rgb[1]=a[1];this.rgb[2]=a[2];this.exportColor(k)};this.fromString=function(a,b){var c=a.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return c?(6===c[1].length?this.fromRGB(parseInt(c[1].substr(0,2),16)/255,parseInt(c[1].substr(2,2),16)/255,parseInt(c[1].substr(4,2),16)/255,b):this.fromRGB(parseInt(c[1].charAt(0)+c[1].charAt(0),16)/255,parseInt(c[1].charAt(1)+c[1].charAt(1),16)/255,parseInt(c[1].charAt(2)+c[1].charAt(2),16)/255,b),!0):
!1};this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var c=this,u="hvs"===this.pickerMode.toLowerCase()?1:0,w=!1,k=jscolor.fetchElement(this.valueElement),g=jscolor.fetchElement(this.styleElement),q=!1,r=!1,t={},y=1,F=2,E=4,D=8;jscolor.isColorAttrSupported=!1;p=document.createElement("input");p.setAttribute&&(p.setAttribute("type","color"),"color"==
p.type.toLowerCase()&&(jscolor.isColorAttrSupported=!0));jscolor.addEvent(a,"focus",function(){c.pickerOnfocus&&c.showPicker()});jscolor.addEvent(a,"blur",function(){w?w=!1:window.setTimeout(function(){w||(k===a&&c.importColor(),c.pickerOnfocus&&c.hidePicker());w=!1},0)});k&&(p=function(){c.fromString(k.value,y);x()},jscolor.addEvent(k,"keyup",p),jscolor.addEvent(k,"input",p),jscolor.addEvent(k,"blur",H),k.setAttribute("autocomplete","off"));g&&(g.jscStyle={backgroundImage:g.style.backgroundImage,
backgroundColor:g.style.backgroundColor,color:g.style.color});switch(u){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}jscolor.requireImage("cross.gif");jscolor.requireImage("arrow.gif");this.importColor()}};jscolor.install();
