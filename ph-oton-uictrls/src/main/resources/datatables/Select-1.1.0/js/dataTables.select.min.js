/*
   Copyright 2015 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license/mit

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net/extensions/select
*/
(function(e){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(k){return e(k,window,document)}):"object"===typeof exports?module.exports=function(k,n){k||(k=window);n&&n.fn.dataTable||(n=require("datatables.net")(k,n).$);return e(n,k,k.document)}:e(jQuery,window,document)})(function(e,k,n,l){function x(a,b,c){var d;d=function(b,c){if(b>c){var d=c;c=b;b=d}var f=!1;return a.columns(":visible").indexes().filter(function(a){a===b&&(f=!0);return a===c?(f=!1,!0):f})};var f=
function(b,c){var d=a.rows({search:"applied"}).indexes();if(d.indexOf(b)>d.indexOf(c)){var f=c;c=b;b=f}var e=!1;return d.filter(function(a){a===b&&(e=!0);return a===c?(e=!1,!0):e})};a.cells({selected:!0}).any()||c?(d=d(c.column,b.column),c=f(c.row,b.row)):(d=d(0,b.column),c=f(0,b.row));c=a.cells(c,d).flatten();a.cells(b,{selected:!0}).any()?a.cells(c).deselect():a.cells(c).select()}function t(a){var b=a.settings()[0]._select.selector;e(a.table().body()).off("mousedown.dtSelect",b).off("mouseup.dtSelect",
b).off("click.dtSelect",b);e("body").off("click.dtSelect")}function v(a){var b=e(a.table().body()),c=a.settings()[0],d=c._select.selector;b.on("mousedown.dtSelect",d,function(a){if(a.shiftKey)b.css("-moz-user-select","none").one("selectstart.dtSelect",d,function(){return!1})}).on("mouseup.dtSelect",d,function(a){b.css("-moz-user-select","")}).on("click.dtSelect",d,function(c){var d=a.select.items(),h=a.settings()[0];if(e(c.target).closest("tbody")[0]==b[0]){var g=e(c.target).closest("td, th"),l=a.cell(g).index();
a.cell(g).any()&&("row"===d?(d=l.row,u(c,a,h,"row",d)):"column"===d?(d=a.cell(g).index().column,u(c,a,h,"column",d)):"cell"===d&&(d=a.cell(g).index(),u(c,a,h,"cell",d)),h._select_lastCell=l)}});e("body").on("click.dtSelect",function(b){c._select.blurable&&!e(b.target).parents().filter(a.table().container()).length&&(e(b.target).parents("div.DTE").length||q(c,!0))})}function m(a,b,c,d){if(!d||a.flatten().length)c.unshift(a),e(a.table().node()).triggerHandler(b+".dt",c)}function w(a){var b=a.settings()[0];
if(b._select.info&&b.aanFeatures.i){var c=e('<span class="select-info"/>'),d=function(b,d){c.append(e('<span class="select-item"/>').append(a.i18n("select."+b+"s",{_:"%d "+b+"s selected",0:"",1:"1 "+b+" selected"},d)))};d("row",a.rows({selected:!0}).flatten().length);d("column",a.columns({selected:!0}).flatten().length);d("cell",a.cells({selected:!0}).flatten().length);e.each(b.aanFeatures.i,function(b,a){a=e(a);var d=a.children("span.select-info");d.length&&d.remove();""!==c.text()&&a.append(c)})}}
function y(a){var b=new g.Api(a);a.aoRowCreatedCallback.push({fn:function(b,d,f){d=a.aoData[f];d._select_selected&&e(b).addClass(a._select.className);b=0;for(f=a.aoColumns.length;b<f;b++)(a.aoColumns[b]._select_selected||d._selected_cells&&d._selected_cells[b])&&e(d.anCells[b]).addClass(a._select.className)},sName:"select-deferRender"});b.on("preXhr.dt.dtSelect",function(){var a=b.rows({selected:!0}).ids(!0).filter(function(b){return b!==l}),d=b.cells({selected:!0}).eq(0).map(function(a){var c=b.row(a.row).id(!0);
return c?{row:c,column:a.column}:l}).filter(function(b){return b!==l});b.one("draw.dt.dtSelect",function(){b.rows(a).select();d.any()&&d.each(function(a){b.cells(a.row,a.column).select()})})});b.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt",function(){w(b)});b.on("destroy.dtSelect",function(){t(b);b.off(".dtSelect")})}function q(a,b){if(b||"single"===a._select.style){var c=new g.Api(a);c.rows({selected:!0}).deselect();c.columns({selected:!0}).deselect();c.cells({selected:!0}).deselect()}}
function u(a,b,c,d,f){var g=b.select.style(),h=b[d](f,{selected:!0}).any();"os"===g?a.ctrlKey||a.metaKey?b[d](f).select(!h):a.shiftKey?"cell"===d?x(b,f,c._select_lastCell||null):(a=c._select_lastCell?c._select_lastCell[d]:null,h=b[d+"s"]({search:"applied"}).indexes(),a=e.inArray(a,h),c=e.inArray(f,h),b[d+"s"]({selected:!0}).any()||-1!==a?(a>c&&(g=c,c=a,a=g),h.splice(c+1,h.length),h.splice(0,a)):h.splice(e.inArray(f,h)+1,h.length),b[d](f,{selected:!0}).any()?(h.splice(e.inArray(f,h),1),b[d+"s"](h).deselect()):
b[d+"s"](h).select()):(a=b[d+"s"]({selected:!0}),h&&1===a.flatten().length?b[d](f).deselect():(a.deselect(),b[d](f).select())):b[d](f).select(!h)}function r(a,b){return function(c){return c.i18n("buttons."+a,b)}}var g=e.fn.dataTable;g.select={};g.select.version="1.1.0";e.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(a,b){g.ext.selector[b.type].push(function(a,d,f){d=d.selected;var e,h=[];if(d===l)return f;for(var g=0,k=f.length;g<k;g++)e=a[b.prop][f[g]],(!0===d&&!0===
e._select_selected||!1===d&&!e._select_selected)&&h.push(f[g]);return h})});g.ext.selector.cell.push(function(a,b,c){b=b.selected;var d,f=[];if(b===l)return c;for(var e=0,h=c.length;e<h;e++)d=a.aoData[c[e].row],(!0===b&&d._selected_cells&&!0===d._selected_cells[c[e].column]||!(!1!==b||d._selected_cells&&d._selected_cells[c[e].column]))&&f.push(c[e]);return f});k=g.Api.register;var p=g.Api.registerPlural;k("select()",function(){});k("select.blurable()",function(a){return a===l?this.context[0]._select.blurable:
this.iterator("table",function(b){b._select.blurable=a})});k("select.info()",function(a){return w===l?this.context[0]._select.info:this.iterator("table",function(b){b._select.info=a})});k("select.items()",function(a){return a===l?this.context[0]._select.items:this.iterator("table",function(b){b._select.items=a;m(new g.Api(b),"selectItems",[a])})});k("select.style()",function(a){return a===l?this.context[0]._select.style:this.iterator("table",function(b){b._select.style=a;b._select_init||y(b);var c=
new g.Api(b);t(c);"api"!==a&&v(c);m(new g.Api(b),"selectStyle",[a])})});k("select.selector()",function(a){return a===l?this.context[0]._select.selector:this.iterator("table",function(b){t(new g.Api(b));b._select.selector=a;"api"!==b._select.style&&v(new g.Api(b))})});p("rows().select()","row().select()",function(a){var b=this;if(!1===a)return this.deselect();this.iterator("row",function(a,b){q(a);a.aoData[b]._select_selected=!0;e(a.aoData[b].nTr).addClass(a._select.className)});this.iterator("table",
function(a,d){m(b,"select",["row",b[d]],!0)});return this});p("columns().select()","column().select()",function(a){var b=this;if(!1===a)return this.deselect();this.iterator("column",function(a,b){q(a);a.aoColumns[b]._select_selected=!0;var f=(new g.Api(a)).column(b);e(f.header()).addClass(a._select.className);e(f.footer()).addClass(a._select.className);f.nodes().to$().addClass(a._select.className)});this.iterator("table",function(a,d){m(b,"select",["column",b[d]],!0)});return this});p("cells().select()",
"cell().select()",function(a){var b=this;if(!1===a)return this.deselect();this.iterator("cell",function(a,b,f){q(a);b=a.aoData[b];b._selected_cells===l&&(b._selected_cells=[]);b._selected_cells[f]=!0;b.anCells&&e(b.anCells[f]).addClass(a._select.className)});this.iterator("table",function(a,d){m(b,"select",["cell",b[d]],!0)});return this});p("rows().deselect()","row().deselect()",function(){var a=this;this.iterator("row",function(a,c){a.aoData[c]._select_selected=!1;e(a.aoData[c].nTr).removeClass(a._select.className)});
this.iterator("table",function(b,c){m(a,"deselect",["row",a[c]],!0)});return this});p("columns().deselect()","column().deselect()",function(){var a=this;this.iterator("column",function(a,c){a.aoColumns[c]._select_selected=!1;var d=new g.Api(a),f=d.column(c);e(f.header()).removeClass(a._select.className);e(f.footer()).removeClass(a._select.className);d.cells(null,c).indexes().each(function(c){var d=a.aoData[c.row],f=d._selected_cells;!d.anCells||f&&f[c.column]||e(d.anCells[c.column]).removeClass(a._select.className)})});
this.iterator("table",function(b,c){m(a,"deselect",["column",a[c]],!0)});return this});p("cells().deselect()","cell().deselect()",function(){var a=this;this.iterator("cell",function(a,c,d){c=a.aoData[c];c._selected_cells[d]=!1;c.anCells&&!a.aoColumns[d]._select_selected&&e(c.anCells[d]).removeClass(a._select.className)});this.iterator("table",function(b,c){m(a,"deselect",["cell",a[c]],!0)});return this});e.extend(g.ext.buttons,{selected:{text:r("selected","Selected"),className:"buttons-selected",
init:function(a,b,c){var d=this;a.on("draw.dt.DT select.dt.DT deselect.dt.DT",function(){var a=d.rows({selected:!0}).any()||d.columns({selected:!0}).any()||d.cells({selected:!0}).any();d.enable(a)});this.disable()}},selectedSingle:{text:r("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(a,b,c){var d=this;a.on("draw.dt.DT select.dt.DT deselect.dt.DT",function(){var b=a.rows({selected:!0}).flatten().length+a.columns({selected:!0}).flatten().length+a.cells({selected:!0}).flatten().length;
d.enable(1===b)});this.disable()}},selectAll:{text:r("selectAll","Select all"),className:"buttons-select-all",action:function(){this[this.select.items()+"s"]().select()}},selectNone:{text:r("selectNone","Deselect all"),className:"buttons-select-none",action:function(){q(this.settings()[0],!0)}}});e.each(["Row","Column","Cell"],function(a,b){var c=b.toLowerCase();g.ext.buttons["select"+b+"s"]={text:r("select"+b+"s","Select "+c+"s"),className:"buttons-select-"+c+"s",action:function(){this.select.items(c)},
init:function(a,b,e){var g=this;a.on("selectItems.dt.DT",function(a,b,d){g.active(d===c)})}}});e(n).on("preInit.dt.dtSelect",function(a,b,c){if("dt"===a.namespace){a=b.oInit.select||g.defaults.select;c=new g.Api(b);var d="row",f="api",k=!1,h=!0,m="td, th",n="selected";b._select={};!0===a?f="os":"string"===typeof a?f=a:e.isPlainObject(a)&&(a.blurable!==l&&(k=a.blurable),a.info!==l&&(h=a.info),a.items!==l&&(d=a.items),a.style!==l&&(f=a.style),a.selector!==l&&(m=a.selector),a.className!==l&&(n=a.className));
c.select.selector(m);c.select.items(d);c.select.style(f);c.select.blurable(k);c.select.info(h);b._select.className=n;e(c.table().node()).hasClass("selectable")&&c.select.style("os")}});return g.select});
